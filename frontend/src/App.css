/* =============================================================================
   CSS CUSTOM PROPERTIES FOR THEME SWITCHING
   ============================================================================= */

:root {
   /* Light mode colors */
   --bg-primary: #ffffff;
   --bg-secondary: #f7fafc;
   --bg-tertiary: #e2e8f0;
   --text-primary: #1a202c;
   --text-secondary: #4a5568;
   --text-muted: #718096;
   --border-light: #e2e8f0;
   --border-lighter: #f1f5f9;
   --border-lightest: #f7fafc;
   --shadow-color: rgba(0, 0, 0, 0.1);
   --scrollbar-track: #f7fafc;
   --scrollbar-thumb: #cbd5e0;
   --scrollbar-thumb-hover: #a0aec0;
   --today-highlight: #805ad5;
   --off-range-bg: #edf2f6;
}

/* Dark mode colors */
[data-theme='dark'],
.chakra-ui-dark {
   --bg-primary: #1a202c;
   --bg-secondary: #2d3748;
   --bg-tertiary: #4a5568;
   --text-primary: #f7fafc;
   --text-secondary: #e2e8f0;
   --text-muted: #a0aec0;
   --border-light: #4a5568;
   --border-lighter: #2d3748;
   --border-lightest: #1a202c;
   --shadow-color: rgba(0, 0, 0, 0.3);
   --scrollbar-track: #2d3748;
   --scrollbar-thumb: #4a5568;
   --scrollbar-thumb-hover: #718096;
   --today-highlight: #9f7aea;
   --off-range-bg: #2d3748;
}

/* =============================================================================
      IMPROVED SCROLLBAR STYLING WITH DARK MODE SUPPORT
      ============================================================================= */

/* Webkit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
   width: 8px;
   height: 8px;
   background: var(--scrollbar-track);
}

::-webkit-scrollbar-thumb {
   background-color: var(--scrollbar-thumb);
   border-radius: 6px;
   border: 2px solid var(--scrollbar-track);
   transition: background-color 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
   background-color: var(--scrollbar-thumb-hover);
}

::-webkit-scrollbar-corner {
   background: var(--scrollbar-track);
}

/* Firefox scrollbar styling */
* {
   scrollbar-width: thin;
   scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}

/* =============================================================================
      REACT-BIG-CALENDAR DARK MODE IMPROVEMENTS
      ============================================================================= */

.rbc-calendar {
   width: 80%;
   min-width: 45vw;
   background-color: var(--bg-primary);
   color: var(--text-primary);
   transition: background-color 0.2s ease, color 0.2s ease;
}

/* =============================================================================
      CALENDAR CONTAINER AND BORDERS
      ============================================================================= */

.rbc-time-view,
.rbc-month-view,
.rbc-agenda-view {
   border: 2px solid var(--border-light) !important;
   border-radius: 12px !important;
   background-color: var(--bg-primary) !important;
   transition: border-color 0.2s ease, background-color 0.2s ease;
   overflow: hidden;
}

.rbc-time-content {
   overflow-x: hidden !important;
   background-color: var(--bg-primary);
}
.rbc-day-bg + .rbc-day-bg,
.rbc-header + .rbc-header,
.rbc-time-content > * + * > *,
.rbc-time-header-content {
   border-left: 1px solid var(--border-light) !important;
}
.rbc-time-header.rbc-overflowing {
   border-right: 1px solid var(--border-light) !important;
}
.rbc-time-content,
.rbc-month-row + .rbc-month-row {
   border-top: 2px solid var(--border-light) !important;
}
.rbc-current-time-indicator {
   background-color: var(--today-highlight) !important;
}
/* =============================================================================
      CALENDAR HEADERS
      ============================================================================= */

.rbc-header {
   color: var(--text-primary) !important;
   border-bottom: none !important;
   padding: 12px 4px !important;
   font-weight: 600 !important;
   font-size: 0.875rem !important;
   transition: all 0.2s ease;
   display: flex;
   align-items: center;
   justify-content: center;
}

.rbc-month-view .rbc-header {
   border-bottom: 2px solid var(--border-light) !important;
}

.rbc-header:last-child {
   border-right: none !important;
}

.rbc-row-bg {
   width: 100% !important;
}
/* =============================================================================
      TIME SLOTS AND GRID LINES
      ============================================================================= */

.rbc-time-slot {
   border-top: 1px solid var(--border-lighter) !important;
   background-color: var(--bg-primary) !important;
   transition: all 0.2s ease;
}

.rbc-day-slot .rbc-time-slot {
   border-right: 1px solid var(--border-lighter) !important;
}

.rbc-timeslot-group {
   border-bottom: 1px solid var(--border-light) !important;
   background-color: var(--bg-primary);
}

/* =============================================================================
      MONTH VIEW IMPROVEMENTS
      ============================================================================= */

.rbc-month-view .rbc-date-cell {
   border-right: 1px solid var(--border-light) !important;
   background-color: var(--bg-primary) !important;
   padding: 4px !important;
   transition: all 0.2s ease;
}
.rbc-month-view .rbc-date-cell.rbc-off-range {
   background-color: var(--off-range-bg) !important;
   opacity: 0.6;
}

.rbc-month-view .rbc-date-cell:last-child {
   border-right: none !important;
}

.rbc-month-row {
   border-bottom: 1px solid var(--border-light) !important;
}

.rbc-month-row:last-child {
   border-bottom: none !important;
}

/* =============================================================================
      TODAY AND DATE HIGHLIGHTING
      ============================================================================= */

.rbc-today {
   background-color: var(--bg-secondary) !important;
}

.rbc-off-range-bg {
   background-color: var(--off-range-bg) !important;
   opacity: 0.6;
}

.rbc-date-cell {
   padding-top: 4px;
   color: var(--text-primary) !important;
}

.rbc-button-link {
   font-size: 0.8rem;
   color: var(--text-primary) !important;
   text-decoration: none;
   padding: 2px 6px;
   border-radius: 4px;
   transition: all 0.2s ease;
}

.rbc-button-link:hover {
   background-color: var(--bg-secondary) !important;
   color: var(--text-primary) !important;
}

.rbc-date-cell.rbc-now .rbc-button-link {
   background: var(--today-highlight) !important;
   color: #ffffff !important;
   border-radius: 50% !important;
   padding: 4px 8px !important;
   font-weight: 600 !important;
   min-width: 24px;
   text-align: center;
}

/* =============================================================================
      EVENT STYLING IMPROVEMENTS
      ============================================================================= */

.rbc-event {
   border-radius: 6px !important;
   padding: 2px 6px !important;
   margin: 1px 0 !important;
   border: none !important;
   font-size: 0.75rem !important;
   line-height: 1.2 !important;
   box-shadow: 0 1px 3px var(--shadow-color) !important;
   transition: all 0.2s ease;
}

.rbc-event:hover,
.rbc-event[aria-expanded='true'].rbc-selected {
   transform: translateY(-1px);
   box-shadow: 0 2px 6px var(--shadow-color) !important;
}

.rbc-event-content {
   font-size: 0.75rem !important;
   line-height: 1.2 !important;
   overflow: hidden;
   text-overflow: ellipsis;
   white-space: nowrap;
}

.rbc-event-allday {
   border-radius: 4px !important;
   font-size: 0.8rem !important;
   padding: 3px 8px !important;
}

/* =============================================================================
      TIME GUTTER (LEFT SIDE TIME LABELS)
      ============================================================================= */

.rbc-time-gutter {
   background-color: var(--bg-secondary) !important;
   border-right: 1px solid var(--border-light) !important;
   width: 60px !important;
}

.rbc-time-gutter .rbc-timeslot-group {
   border-bottom: 1px solid var(--border-light) !important;
}

.rbc-time-gutter .rbc-timeslot-group .rbc-time-slot {
   border-top: none !important;
}

.rbc-label {
   color: var(--text-secondary) !important;
   font-size: 0.75rem !important;
   padding-right: 8px !important;
   text-align: right !important;
   font-weight: 500 !important;
}

/* =============================================================================
      AGENDA VIEW IMPROVEMENTS
      ============================================================================= */

.rbc-agenda-view {
   background-color: var(--bg-primary) !important;
}

.rbc-agenda-table {
   background-color: var(--bg-primary) !important;
}

.rbc-agenda-table tbody tr {
   border-bottom: 1px solid var(--border-lighter) !important;
}

.rbc-agenda-table tbody tr:hover {
   background-color: var(--bg-secondary) !important;
}

.rbc-agenda-table td {
   color: var(--text-primary) !important;
   padding: 12px 8px !important;
}

.rbc-agenda-date-cell {
   background-color: var(--bg-secondary) !important;
   font-weight: 600 !important;
}

.rbc-agenda-time-cell {
   color: var(--text-secondary) !important;
   font-size: 0.875rem !important;
}

/* =============================================================================
      POPUP AND OVERLAY IMPROVEMENTS
      ============================================================================= */

.rbc-overlay {
   background-color: var(--bg-primary) !important;
   border: 1px solid var(--border-light) !important;
   border-radius: 8px !important;
   box-shadow: 0 4px 12px var(--shadow-color) !important;
   padding: 8px !important;
}

.rbc-overlay-header {
   background-color: var(--bg-secondary) !important;
   color: var(--text-primary) !important;
   border-bottom: 1px solid var(--border-light) !important;
   padding: 8px 12px !important;
   font-weight: 600 !important;
}

/* =============================================================================
      NAVIGATION AND TOOLBAR
      ============================================================================= */

.rbc-toolbar {
   background-color: var(--bg-primary) !important;
   padding: 16px !important;
   border-bottom: 1px solid var(--border-light) !important;
   margin-bottom: 16px !important;
}

.rbc-toolbar button {
   background-color: var(--bg-secondary) !important;
   color: var(--text-primary) !important;
   border: 1px solid var(--border-light) !important;
   border-radius: 6px !important;
   padding: 6px 12px !important;
   font-size: 0.875rem !important;
   font-weight: 500 !important;
   transition: all 0.2s ease;
}

.rbc-toolbar button:hover {
   background-color: var(--bg-tertiary) !important;
   border-color: var(--border-light) !important;
}

.rbc-toolbar button.rbc-active {
   background-color: var(--today-highlight) !important;
   color: #ffffff !important;
   border-color: var(--today-highlight) !important;
}

/* =============================================================================
      RESPONSIVE IMPROVEMENTS
      ============================================================================= */

@media (max-width: 768px) {
   .rbc-calendar {
      width: 95%;
      min-width: 100%;
   }

   .rbc-time-slot {
      border-bottom: 1px solid var(--border-lighter) !important;
   }

   .rbc-date-cell {
      border-right: 1px solid var(--border-lighter) !important;
      min-height: 40px;
   }

   .rbc-header {
      padding: 12px 2px !important;
      font-size: 0.75rem !important;
   }

   .rbc-event-content {
      font-size: 0.7rem !important;
   }

   .rbc-time-gutter {
      width: 50px !important;
   }

   .rbc-label {
      font-size: 0.65rem !important;
   }
}

@media (max-width: 480px) {
   .rbc-calendar {
      width: 100%;
   }

   .rbc-time-view,
   .rbc-month-view,
   .rbc-agenda-view {
      border-radius: 8px !important;
   }

   .rbc-date-cell {
      min-height: 35px;
   }

   .rbc-header {
      padding: 12px 1px !important;
      font-size: 0.7rem !important;
   }

   .rbc-time-gutter {
      width: 40px !important;
   }

   .rbc-label {
      font-size: 0.6rem !important;
   }
}

/* =============================================================================
      UTILITY CLASSES FOR DYNAMIC THEMING
      ============================================================================= */

/* Hide all grid lines */
.calendar-no-grid .rbc-time-slot,
.calendar-no-grid .rbc-date-cell,
.calendar-no-grid .rbc-header,
.calendar-no-grid .rbc-time-column {
   border: none !important;
}

/* Extra bold grid lines */
.calendar-bold-grid .rbc-time-slot,
.calendar-bold-grid .rbc-date-cell,
.calendar-bold-grid .rbc-header {
   border-width: 2px !important;
}

/* Dotted grid lines */
.calendar-dotted-grid .rbc-time-slot,
.calendar-dotted-grid .rbc-date-cell {
   border-style: dotted !important;
}

/* Dashed grid lines */
.calendar-dashed-grid .rbc-time-slot,
.calendar-dashed-grid .rbc-date-cell {
   border-style: dashed !important;
}

/* Minimal grid (lighter borders) */
.calendar-minimal-grid .rbc-time-slot,
.calendar-minimal-grid .rbc-date-cell {
   border-color: var(--border-lightest) !important;
}

/* High contrast mode */
.calendar-high-contrast .rbc-time-slot,
.calendar-high-contrast .rbc-date-cell,
.calendar-high-contrast .rbc-header {
   border-color: var(--text-primary) !important;
   border-width: 1px !important;
}

/* =============================================================================
      HIDDEN CARD UTILITY
      ============================================================================= */

.hidden-card {
   height: 0 !important;
   padding: 0 !important;
   border: 0 !important;
   overflow: hidden !important;
   margin: 0 !important;
   opacity: 0 !important;
   transition: all 0.3s ease;
}

/* =============================================================================
      ACCESSIBILITY IMPROVEMENTS
      ============================================================================= */

/* High contrast for better readability */
@media (prefers-contrast: high) {
   .rbc-time-slot,
   .rbc-date-cell,
   .rbc-header {
      border-width: 2px !important;
      border-color: var(--text-primary) !important;
   }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
   * {
      transition: none !important;
      animation: none !important;
   }
}

/* =============================================================================
      SMOOTH TRANSITIONS FOR THEME SWITCHING
      ============================================================================= */

.rbc-calendar,
.rbc-calendar * {
   transition: background-color 0.2s ease, color 0.2s ease,
      border-color 0.2s ease, box-shadow 0.2s ease !important;
}

/* Force font inheritance for calendar components */
.rbc-calendar,
.rbc-calendar * {
   font-family: inherit !important;
}

.conflicted-event {
   border: 2px dashed #f6ad55 !important;
   border-radius: 4px !important;
}

/* =============================================================================
      EVENT WRAPPER POPOVER STYLING AND Z-INDEX
      ============================================================================= */

/* Ensure popover content appears above calendar cells */
[data-popper-placement] {
   z-index: 9999 !important;
}

/* Chakra UI Popover specific z-index improvements */
.chakra-popover__popper {
   z-index: 9999 !important;
}

.chakra-popover__content {
   z-index: 9999 !important;
   box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
   border: 1px solid var(--border-light) !important;
   background-color: var(--bg-primary) !important;
}

/* Ensure popover arrow also has proper z-index */
.chakra-popover__arrow-positioner {
   z-index: 9999 !important;
}

.chakra-popover__arrow {
   z-index: 9999 !important;
   background-color: var(--bg-primary) !important;
   border-color: var(--border-light) !important;
}

/* Calendar container z-index adjustments */
.rbc-calendar {
   position: relative;
   z-index: 1;
}

.rbc-time-view,
.rbc-month-view,
.rbc-agenda-view {
   position: relative;
   z-index: 1;
}

/* Ensure row content doesn't block popover */
.rbc-row-content {
   position: relative;
   z-index: 1;
}

.rbc-month-row {
   position: relative;
   z-index: 1;
}

.rbc-row-segment {
   position: relative;
   z-index: 1;
}

/* Event elements should have lower z-index than popover */
.rbc-event {
   position: relative;
   z-index: 2;
}

.rbc-event:hover,
.rbc-event:focus,
.rbc-event.rbc-selected {
   z-index: 3;
}

/* Ensure calendar cells don't interfere with popover */
.rbc-date-cell,
.rbc-time-slot {
   position: relative;
   z-index: 1;
}

/* Specific styling for event wrapper popover */
.event-wrapper-popover {
   z-index: 10000 !important;
   position: relative !important;
}

/* Force popover to appear on top of everything */
[role='dialog'].event-wrapper-popover,
[role='dialog'] .event-wrapper-popover {
   z-index: 10000 !important;
}

/* Popover portal container should also have high z-index */
.chakra-portal .event-wrapper-popover {
   z-index: 10000 !important;
}

/* Ensure all Chakra Portal elements have proper z-index for popovers */
.chakra-portal [data-popper-placement] {
   z-index: 10000 !important;
}

/* Override any calendar overlay z-index */
.rbc-overlay {
   z-index: 100 !important;
}

.rbc-calendar .chakra-popover__content {
   z-index: 10000 !important;
}

/* Force all calendar elements to have lower z-index than popover */
.rbc-calendar,
.rbc-calendar
   *:not(.chakra-popover__content):not(.chakra-popover__popper):not(
      [data-popper-placement]
   ) {
   z-index: auto !important;
}

/* Specifically target problematic calendar elements */
.rbc-row-content,
.rbc-row-segment,
.rbc-month-row,
.rbc-date-cell,
.rbc-time-slot,
.rbc-time-view,
.rbc-month-view,
.rbc-allday-cell,
.rbc-time-header {
   z-index: 1 !important;
}

/* Popover should always be on top */
.chakra-popover__content,
.chakra-popover__popper,
[data-popper-placement] {
   z-index: 10000 !important;
}

/* Nuclear option: force all popover elements to highest z-index */
[class*='chakra-popover'],
[class*='popover'],
[role='dialog'],
[role='tooltip'] {
   z-index: 10000 !important;
}

/* Ensure event wrapper popover is never behind anything */
.event-wrapper-popover,
.event-wrapper-popover * {
   z-index: 10000 !important;
}

/* =============================================================================
      REACT QUILL RICH TEXT EDITOR STYLING
      ============================================================================= */

/* Quill editor container styling */
.quill-editor-container .ql-editor {
   background-color: var(--bg-secondary) !important;
   border: none !important;
   font-size: 14px !important;
   min-height: 100px !important;
   padding: 12px !important;
   color: var(--text-primary) !important;
   transition: background-color 0.2s ease, color 0.2s ease;
}

/* Quill toolbar styling */
.quill-editor-container .ql-toolbar {
   background-color: var(--bg-secondary) !important;
   border: none !important;
   border-bottom: none !important;
   border-top-left-radius: 6px !important;
   border-top-right-radius: 6px !important;
   padding: 8px 12px !important;
   transition: background-color 0.2s ease;
}

/* Quill container styling */
.quill-editor-container .ql-container {
   background-color: var(--bg-secondary) !important;
   border: none !important;
   border-top: none !important;
   border-bottom-left-radius: 6px !important;
   border-bottom-right-radius: 6px !important;
   font-size: 14px !important;
   transition: background-color 0.2s ease;
}

/* Quill toolbar button styling */
.quill-editor-container .ql-toolbar .ql-stroke {
   stroke: var(--text-primary) !important;
   transition: stroke 0.2s ease;
}

.quill-editor-container .ql-toolbar .ql-fill {
   fill: var(--text-primary) !important;
   transition: fill 0.2s ease;
}

.quill-editor-container .ql-toolbar .ql-picker-label {
   color: var(--text-primary) !important;
   transition: color 0.2s ease;
}
.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {
   border: 'none' !important;
}

/* Quill placeholder styling */
.quill-editor-container .ql-editor.ql-blank::before {
   color: var(--text-muted) !important;
   font-style: normal !important;
   transition: color 0.2s ease;
}

/* Quill toolbar button hover effects */
.quill-editor-container .ql-toolbar button:hover {
   background-color: var(--bg-tertiary) !important;
   border-radius: 4px !important;
}

.quill-editor-container .ql-toolbar button.ql-active {
   background-color: var(--bg-tertiary) !important;
   color: white !important;
   border-radius: 4px !important;
}

/* Quill snow theme border override */
.quill-editor-container .ql-toolbar.ql-snow {
   border: none !important;
}

.quill-editor-container .ql-container.ql-snow {
   border: none !important;
}

/* Quill content formatting */
.quill-editor-container .ql-editor p {
   margin-bottom: 0.5em !important;
}

.quill-editor-container .ql-editor ul,
.quill-editor-container .ql-editor ol {
   padding-left: 1.5em !important;
   margin-bottom: 0.5em !important;
}

.quill-editor-container .ql-editor li {
   margin-bottom: 0.25em !important;
}

.quill-editor-container .ql-editor a {
   color: #3182ce !important;
   text-decoration: underline !important;
}

.quill-editor-container .ql-editor strong {
   font-weight: bold !important;
}

.quill-editor-container .ql-editor em {
   font-style: italic !important;
}

.quill-editor-container .ql-editor u {
   text-decoration: underline !important;
}

/* Dark mode adjustments for Quill editor */
[data-theme='dark'] .quill-editor-container .ql-editor a,
.chakra-ui-dark .quill-editor-container .ql-editor a {
   color: #63b3ed !important;
}
